<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="notes.js"></script>
  </head>
  <body>
<h1> NOTES </h1>
<textarea> some text </textarea>
<input type="submit" value="create">
<ul id="notes">
  <li> <a href="" id="abbr"> Note1 </a></li>
  <li> Note1 </li>
  <li> Note2 </li>
  <li> Note3 </li>
</ul>
<h1> My note </h1>
<div id="full"></div>



  </body>

  <script>


  mynotes = new Notes();
  mynotes.items = ['hellohellohellohello!!!', 'goodbye', 'chocolate', 'banana'];
  notes = mynotes.items;

  var renderNote = function (notes) {
    notes.forEach(function(note, index){
      var a = document.createElement('a');
      var ul = document.getElementById("notes");
      var li = document.createElement("li");
      var text = document.createTextNode(truncator(note));
      a.id = index;
      a.title = text;
      a.href = "#"+index;
      a.appendChild(text);
      li.appendChild(a);
      ul.appendChild(li);
    });
  }
  renderNote(notes);
  makeURLRenderFullNote();

  function renderFullNote () {
    document
    .getElementById(0)
    .addEventListener("click", function(clickEvent) {
      clickEvent.preventDefault();
      showNote();
    });
  }
  function makeURLRenderFullNote() {
    window.addEventListener("hashchange", showNoteForCurrentPage);
  }

  function showNoteForCurrentPage () {
    showNote(showNoteFromUrl(window.location));
  }

  function showNoteFromUrl (location) {
    return location.hash.split("#")[1];
  }

  function showNote(index) {
    document
    .getElementById("full")
    .innerHTML = mynotes.items[index];
  }
  console.log(testLink());
  renderFullNote();

  function testLink () {
    document.getElementById(0).click();
    if (document.getElementById("full").innerHTML !== 'hellohellohellohello!!!') {
      throw new Error("This is not the full note");
    }
  }

  function testTruncator (notes) {
    renderNote(notes);
    if (document.getElementById(0).title.length < 23) {
      throw new Error("Note not abbreviated");
    }
  }
  console.log(testTruncator(notes));

  console.log(document.getElementsByTagName("a.title")[4]);


  </script>
</html>
